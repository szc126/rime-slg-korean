patch:
  "speller/alphabet": "~bcdfghklmnpqrstvwxz0`aeijouy;'."
  "speller/initials": "~bcdfghklmnpqrstvwxz0`aeijouy;'"
  "speller/algebra":
    - "xform/^~~//"

    - "xform/[*]/;/" # arae-a

    - "xform/^([BCDFGHKLMNPQRSTVWXZ]+`?)$/$1./" # full stop for jungseong
    - "xlit BCDFGHKLMNPQRSTVWXZ bcdfghklmnpqrstvwxz"
    - "xform/^(~.+)$/$1./" # use a full stop to end compat jamo
    - "xform/q`/0/" # yesieung. not like we need the candidate list anyway

  "translator/preedit_format":
    - "xform/;/*/"

    - "xform/0/q`/"

    #- "xform/ (?=[aeijouy*])//"
    #- "xform/ (?=[^. ~]+[.])//"
    - "xform/(?<=[bcdfghklmnpqrstvwxz`]) (?=[aeijouy*])//"
    - "xform/(?<=[aeijouy*]) (?=[bcdfghklmnpqrstvwxz0`]+[.])//"
    - "xform/ (?=')//"

    # TEST: `za ~qs. i qi qaq.'' qeq`. ~q. q ~q. s. ~q`. q.

  "key_binder/bindings/+":
    - { when: has_menu, accept: period, send: period }
    - { when: has_menu, accept: Return, send: space } # commit with space or return

  #"menu/page_size": 1 # nvm

  "style/font_face": "NanumMyeongjo YetHangul"
  "style/font_point": 20

  # Pinyin
  "engine/segmentors":
    - ascii_segmentor
    - matcher
    - affix_segmentor@pinyin
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  "engine/translators/+":
    - script_translator@pinyin

  # pinyin, even without prefix
  # not what i want
  #abc_segmentor:
    #extra_tags: [ pinyin ]

  pinyin:
    tag: pinyin
    dictionary: terra_pinyin
    prefix: "P"
    suffix: "."

  "recognizer/patterns":
    pinyin: "P[a-z]*[.]?$"
